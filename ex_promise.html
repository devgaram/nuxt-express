<!DOCTYPE html>
<html>
<head>
	<title></title>
</head>
<body>

<script>
/*
	promise 예제

	pending상태 : new Promise로 Promise가 생성되는 직후부터 resolve, reject가 호출되기 전까지의 순간

	이후, 비동기 작업이 마친 뒤, 성공이면 resolve 함수를 호출하고 실패면 reject 함수를 호출한다.
*/

// promise 선언부
let _promise = (param) => {
	return new Promise((resolve, reject) => {
		// 비동기를 표현하기 위해 setTimeout 함수를 사용
		window.setTimeout(() => {
			if (param) {
				resolve("해결 완료");
			}
			else {
				reject(Error("실패!!"));
			}
		},3000);
	})
}

// promise 실행부
/*
	_promise()를 호출하면 Promise 객체가 리턴된다.
	Promise 객체는 정상적인 비동기작업이 완료되었을 때 호출하는 then API가 존재한다.

	.then(성공시 호출할 함수, 실패시 호출할 함수)
*/
_promise(true)
.then (JSON.parse)
.catch (()=>{
	window.alert('체이닝 중간에 에러가!')
})
.then ((text) => {
	// 성공시
	console.log(text);
},(error) => {
	// 실패시
	console.error(error);
})
</script>
</body>
</html>

